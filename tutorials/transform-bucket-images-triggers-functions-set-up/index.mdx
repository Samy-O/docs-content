---
meta:
  title: Transforming images in an S3 bucket using Serverless Functions and Triggers - Set up
  description: This page shows you how to set up your environment to transform images in an S3 bucket using Serverless Functions and Triggers
content:
  h1: Transforming images in an S3 bucket using Serverless Functions and Triggers - Set up
  paragraph: This page shows you how to set up your environment to transform images in an S3 bucket using Serverless Functions and Triggers
categories:
  - messaging
  - functions
  - object-storage
tags: serverless serverless-functions functions serverless-triggers triggers sqs-queue bucket tutorial
dates:
  validation: 2024-01-08
  posted: 2023-07-07
---

Serverless Functions are an asynchronous microservices architecture where event sources are decorrelated from event consumers.

They work best when they are triggered by specific events, such as cron schedules, which means that they can be edited without having to modify every microservice in the process.

In this tutorial, we will deploy a function that manipulates images stored in a source bucket and push them to another bucket using the [AWS SDK for Javascript](https://docs.aws.amazon.com/AWSJavaScriptSDK/v3/latest/client/s3/).

<Macro id="iam-requirements" />
 
<Message type="requirement">
  - You have an account and are logged into the [Scaleway console](https://console.scaleway.com).
  - You have [NodeJS](https://nodejs.org/en/download) and [npm](https://docs.npmjs.com/downloading-and-installing-node-js-and-npm) installed.
  - You have at least ten JPG or PNG images.
</Message>

## Creating a New Project

1. Click the **Projects** tab from the [Organization Dashboard](https://console.scaleway.com/organization). A list of your Projects displays.
2. Click **+ Create Project** on the right-hand side. A pop-up displays. 
3. Name the project `Functions Tutorial`.
4. Click **Create Project**. The new Project is added to the list. 

## Creating the source bucket

1. Click **Object Storage** under **Storage** on the left side menu of the console. The Object Storage dashboard displays.
3. Click **+ Create a bucket**.
4. Name it `source-images-<YOUR_NAME>`.
5. Choose the **AMSTERDAM** Region.
6. Set the bucket visibility to **Private**.
7. Click **Create Bucket**. The bucket **Files** tab displays.
8. Upload your images to the bucket and select the **Standard** storage class.

## Creating the destination bucket

1. Click **Storage**, then **Object Storage** on the left side menu of the console. The Object Storage dashboard displays.
2. Click **+ Create a bucket**.
3. Name it `dest-images-<YOUR_NAME>`.
4. Choose the **AMSTERDAM** Region.
5. Set the bucket visibility to **Private**.
6. Click **Create Bucket**.

## Creating IAM credentials

Identity and Access Management (IAM) credentials allow you to secure access to your buckets, functions, etc. 

<Message type="note">
    For this tutorial we will use *User* credentials which are simpler to use. However, for production-grade Serverless applications, we recommend to use *Application* credentials with the minimum possible rights.
</Message>

1. Click the Organization in the top right corner and Select **API keys**. The IAM **API keys** tab displays.
2. Click **+ Generate an API key** or the <Icon name="plus" /> button.
3. Select **Myself (IAM)** as the API key Bearer.
4. Enter `API key for the Function Tutorial` as a description.
5. Set **Expiration** to **One Week**.
6. Select **Yes, set up preferred Project**.
7. Choose the **Functions Tutorial** project (or the name you gave to this project).
8. Click **Generate API key**.
9. Store the Access key ID and the Secret key securely, as you will not be able to access them later.

## Enabling monitoring with Cockpit

1. Click **Cockpit** under **Observability**.
2. Click **Activate Cockpit**.
3. Click the **Grafana users** tab. 
4. Click **+ Add user**.
5. Enter a username.
6. Select the **Editor** role.
7. Click **Add user**.
8. Store the password securely, as you will not be able to access it later.

## Creating and deploying functions

You have created all the necessary resources, it is now time to [create functions](/tutorials/transform-bucket-images-triggers-functions-deploy/).

<Message type="tip">
Setting up an environment with all the necessary resources can be time-consuming. You can use IaC (Infrastructure as Code) tools such as [Terraform](/tutorials/manage-instances-with-terraform-and-functions/) to automate a project's configuration.
</Message>
